% !TeX spellcheck = de_CH
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  _____   ____  _____                                          %
% |_   _| /  __||  __ \    Institute of Computitional Physics   %
%   | |  |  /   | |__) |   Zuercher Hochschule Winterthur       %
%   | |  | (    |  ___/    (University of Applied Sciences)     %
%  _| |_ |  \__ | |        8401 Winterthur, Switzerland         %
% |_____| \____||_|                                             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Project     : BA Welti Keller
% Title       : 
% File        : anhang.tex Rev. 00
% Date        : 15.09.2014
% Author      : Tobias Welti
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\pagenumbering{Roman}

\appendix
\chapter{Anhang}\label{chap.anhang}


\section{Offizielle Aufgabenstellung}\label{app.aufgabenstellung}
\includepdf{images/BA_welti_keller_hs14.pdf}


\section{Projektmanagement}\label{app.projektmanagement}

\subsection{Zeitplanung und Meilensteine}
Abbildung \ref{fig.gantt} zeigt den Gantt-Chart des Projekts. Die Konzeptphase wurde gemeinsam bearbeitet. Danach wurden die Arbeiten aufgeteilt, T. Keller entwickelte das CAN-Protokoll und die zugehörigen \gls{ipc}-Abläufe. Die Konfiguration und Bedienung der Messstation wurde von T. Welti entwickelt. Die Aufteilung aller Arbeitspakete ist im Gantt-Chart auf Seite \pageref{fig.gantt} aufgeführt.

\begin{figure}
	\centering		\includegraphics[angle=270,width=1\textwidth]{images/gantt.pdf}
	\caption{Gantt-Chart des Projekts.}
	\label{fig.gantt}
\end{figure}

\subsubsection{Meilenstein 1: Hardware in Betrieb}
Ein erstes Konzept wurde pünktlich zum Meilenstein 1 erstellt. Bezüglich der Art, wie die Dokumentation (vor allem welche Diagramme am besten geeignet wären) im Detail auszusehen hat, bestanden noch Unsicherheiten. Soweit sinnvoll soll UML verwendet werden, damit die Diagramme verständlich sind.

\subsubsection{Meilenstein 2: Gehäuse und Leiterplatte}
Die Leiterplatte wurde in unserem Auftrag und unter Mithilfe von T. Welti durch Valentin Schlatter (ZHAW InES) entwickelt. Beim Entwurf und dem Bau der Gehäuse stand Erich Ruff (ZHAW InES) als Berater zur Seite und übernahm die Bohrarbeiten. Dank ihrer Mithilfe konnte der Meilenstein 2 termingerecht abgeschlossen werden.

\subsubsection{Meilenstein 3: Software}
Der dritte Meilenstein konnte nicht eingehalten werden. Die ersten proof-of-concept-Implementationen sahen zwar vielversprechend aus, allerdings tauchten bei der Detailimplementation des CAN-Protokolls Schwierigkeiten auf, die einige Umstellungen notwendig machten. So konnte der Meilenstein erst mit drei Wochen Verspätung erreicht werden.

\subsubsection{Meilenstein 4: Testing}
Aufgrund der Verzögerung des zweiten Meilensteins konnte auch dieser Meilenstein nicht fristgereicht erreicht werden. Zudem ist das Testing rudimentär ausgefallen, da nach der Verzögerung kaum mehr Zeit für intensive Tests blieb. Wir waren aus terminlichen Gründen gezwungen, die Arbeit auf den MS~5 zu fokussieren.

\subsubsection{Meilenstein 5: Dokumentation}
Der letzte Meilenstein konnte fristgerecht erreicht werden.


\subsection{Besprechungsprotokolle}

\subsubsection{Projektskizzierung an der WSL, Birmensdorf}
Die erste Sitzung zum Projekt fand am 16. Juli 2014 an der \gls{wsl} in Birmensdorf statt. Anwesende waren Bruno Fritschi (Projektidee), Carlos Wyss (Doktorand), Alexandre Badoux (Gruppenleiter) sowie Tobias Keller und Tobias Welti.

Die Projektidee wurde von Bruno Fritschi noch einmal erklärt. Carlos Wyss zeigte einige Beispiele von bestehenden Messresultaten und erläuterte den Algorithmus der \gls{ereignisdet}, die mittels Hilbert-Transformation gelöst wird. Die Datenreduktion erfolgt durch Berechnung eines Histogramms der Peakintensitäten über eine Minute und die Speicherung der Dauer, Intensität und Anzahl \glspl{peak} jedes \gls{ereignis}ses. Als minimale Anforderung an die Messdaten wurde vereinbart, dass die \gls{fs} mindestens 10~kHz beträgt und mindestens die gleichen Werte gespeichert werden wie bisher.

Als Wunsch wurde von Carlos Wyss geäussert, die Originaldaten von Anfang bis Ende der \gls{ereignis} speichern zu können.


\subsubsection{Zwischenbesprechung an der ZHAW, Winterthur}
Eine Zwischenbesprechung am 28. Oktober 2014 an der ZHAW Winterthur verlief sehr zufriedenstellend. Anwesend waren Prof. Hans Gelke (Betreuer), Bruno Fritschi sowie Tobias Keller und Tobias Welti.

\paragraph{Projektstand} An der Zwischenbesprechung konnte bereits der Testaufbau mit einer \gls{sensoreinh} vorgeführt werden. Die Signale wurden auf einem Oszilloskop visualisiert und entsprachen den Erwartungen von Bruno Fritschi. Die Dimensionen der Geräte waren jedoch wesentlich grösser als erwartet. 

\paragraph{Beschlüsse} In der Diskussion wurde entschieden, die bereits im Aufbau befindlichen Gehäuse trotzdem fertig zu bauen. Das Projekt war zu diesem Zeitpunkt auf einem guten Weg, weshalb keine Massnahmen oder Änderungen an den Zielen beschlossen wurden.

\subsubsection{Zwischenbesprechung an der VAW, ETH Hönggerberg}
Am 12. November 2014 fand eine zweite Projektsitzung statt, diesmal an der \gls{vaw} an der ETH Hönggerberg. Anwesend waren Prof. Hans Gelke, Prof. Dieter Rickenmann (WSL), Bruno Fritschi, Carlos Wyss sowie Tobias Keller und Tobias Welti.

\paragraph{Projektstand} Die Methode der Ereigniserkennung mittels einer State Machine mit konfigurierbaren Parametern wurde vorgestellt und von den Anwesenden gelobt. Die verschiedenen Detail-Level wurden intensiv diskutiert und Vor- und Nachteile aufgeführt. 

\paragraph{Beschlüsse} Es wurde beschlossen, das Projekt mit allen vorgeschlagenen Detail-Levels weiterzuführen, da für jeden Modus ein plausibles Szenario gefunden wurde. Da das Projekt mit der \gls{ereignisdet} und Teilen des CAN-Protokolls gut im Zeitplan lag, wurden keine Änderungen der Ziele definiert. Die geplanten Tests an der \gls{vaw} wurden aber auf einen Zeitpunkt nach dem Abschluss der Bachelorarbeit verschoben.

Für die Tests in der Versuchsrinne ist vorgesehen, die Sensoren ausserhalb der Gehäuse der \glspl{sensoreinh} anzuschliessen und unter die bestehende Stahlplatte zu montieren. Dann können Vergleichsmessungen mit Geophonen und \gls{mems}-Beschleunigungssensoren durchgeführt werden.

Als Folgeprojekt oder möglicher Entwicklungsauftrag an die ZHAW wurde die Miniaturisierung  der \gls{sensoreinh} und deren Entwicklung zur Produktreife ins Auge gefasst.

Im Anschluss an die Sitzung wurde die \gls{vaw} besichtigt. Hier konnten sich die Entwickler zum ersten Mal ein (eindrückliches!) Bild der bestehenden Messinstallationen mit Geophonen machen.

\clearpage
\section{Schaltpläne}\label{app.pcb}
\includepdf[angle=90]{images/pcb/Schematic.pdf}
\includepdf[pages={1,2},angle=90]{images/pcb/PCB_Layout.pdf}


\section{Datenblätter}\label{app.datasheets}
Um die Dokumentation übersichtlich zu halten, wird der Grossteil der Datenblätter nicht mit der Dokumentation ausgedruckt, sondern auf der beiliegenden \gls{cd} mitgeliefert.


\subsection{NXP LPC4088 32-bit ARM Cortex-M4 microcontroller}
\includepdf[pages={7}]{images/datasheets/LPC408X_7X.pdf}\label{ds.lpc4088}


\subsection{Embedded Artists NXP LPC4088 QuickStart Board}

\begin{figure}
	\centering		\includegraphics[width=0.7\textwidth]{images/datasheets/lpc4088_qsb_key_components_reva.png}
	\caption{Hauptkomponenten des NXP LPC4088 QuickStart Boards von Embedded Artists.}
	\label{fig.NXP_LPC4088_QSB_comps}
\end{figure}

\begin{figure}
	\centering		\includegraphics[width=0.7\textwidth]{images/datasheets/LPC4088_QSB_pinning_revA_800x769.png}
	\caption{Pins des NXP LPC4088 QuickStart Boards von Embedded Artists.}
	\label{fig.NXP_LPC4088_QSB_pinout}
\end{figure}

\includepdf{images/datasheets/LPC4088qsb.pdf}

\subsection{Analog Devices ADXL001 Beschleunigungssensor}
\includepdf[pages={3}]{images/datasheets/ADXL001.pdf}


\section{Fotos}\label{sec.foto.testaufbau}
Die Fotos befinden sich auf der beiliegenden CD und können auch aus dem Git-Repository unter \url{https://github.com/tokeller/WeKeBA} heruntergeladen werden.

\section{Source Code, Daten und Multimedia}\label{app.cd}
Da der Source Code sehr umfangreich ist, wird darauf verzichtet, ihn ausgedruckt zur Verfügung zu stellen. Er befindet sich auf der beiliegenden \gls{cd}.


CD mit dem vollständigen Bericht als pdf-File inklusive Film- und Fotomaterial}
\begin{lstlisting}[caption=Inhaltsverzeichnis CD, label=list.cd]
Inhaltsverzeichnis CD
=====================
1_Dokumentation
  gesamte Dokumentation als .pdf-Datei sowie als LaTeX source code.
2_Projektplanung
  Microsoft Project Datei mit der Projektplanung
3_Datenblätter
  Datenblätter aller verwendeten Komponenten. 
4_Busprotokoll
  Excel-Datei mit den Message-Formaten
5_Leiterplatte
  Gerber-Daten, Layout, Schema, Stückliste der Leiterplatte.
6_source_code
  Der komplette Source Code des Projekts inkl. Projektfile für Keil uVision 5. 
  Der selbst verfasste Source Code liegt im Verzeichnis 
  mbed_BusHandlerV2/source/app/
7_Literatur
  pdf-Dateien der zitierten Literatur.
8_Fotos
  Fotos des Projekts, sortiert in einer Ordnerstruktur
9_Messdaten
  Messdaten von Versuchen am Testaufbau
\end{lstlisting}
